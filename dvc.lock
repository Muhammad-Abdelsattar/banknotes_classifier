schema: '2.0'
stages:
  prepare:
    cmd:
    - unzip -o input/dataset.zip -d input/dataset > /dev/null 2>&1
    - unzip -o input/test_dataset.zip -d input/test_dataset > /dev/null 2>&1
    deps:
    - path: input/dataset.zip
      hash: md5
      md5: efa3173ffbd73517b514cb41136414b1
      size: 1550586976
    outs:
    - path: input/dataset
      hash: md5
      md5: acbfa59c2ecc1e3ff82860f3d95c02eb.dir
      size: 1554147288
      nfiles: 19525
  train:
    cmd: python -m steps.train
    deps:
    - path: banknotes_classifier/data
      hash: md5
      md5: bec210d9dfe570814b1220bde8caea5c.dir
      size: 4985
      nfiles: 6
    - path: banknotes_classifier/modeling
      hash: md5
      md5: d25050fe2b2dc00d8c2515bd57e95abc.dir
      size: 17071
      nfiles: 8
    - path: banknotes_classifier/training
      hash: md5
      md5: d696978920e82b63e5aa58d0902e3981.dir
      size: 2051
      nfiles: 6
    - path: input/dataset
      hash: md5
      md5: acbfa59c2ecc1e3ff82860f3d95c02eb.dir
      size: 1554147288
      nfiles: 19525
    - path: steps/train.py
      hash: md5
      md5: 6d113cb874e1af3de07f648fb9ac09b3
      size: 2059
    outs:
    - path: artifacts/checkpoints/best-checkpoint.ckpt
      hash: md5
      md5: c9ee55b53658be263a451f8efc164876
      size: 48793250
    - path: reports/metrics.json
      hash: md5
      md5: 00b459e60e406f389329f51c52141616
      size: 289
  export:
    cmd: python -m steps.export
    deps:
    - path: artifacts/checkpoints/best-checkpoint.ckpt
      hash: md5
      md5: c9ee55b53658be263a451f8efc164876
      size: 48793250
    - path: steps/export.py
      hash: md5
      md5: 7ef7181368a7446347a879305b866a12
      size: 1494
    outs:
    - path: artifacts/model.onnx
      hash: md5
      md5: 9e6a76c2f404b30aab598b26c18bce25
      size: 16103539
  evaluate:
    cmd: python -m steps.evaluate
    deps:
    - path: artifacts/model.onnx
      hash: md5
      md5: 9e6a76c2f404b30aab598b26c18bce25
      size: 16103539
    - path: input/test_dataset
      hash: md5
      md5: f2b416ef8f4806d6811924159f6b393e.dir
      size: 165497572
      nfiles: 1680
    - path: steps/evaluate.py
      hash: md5
      md5: 154bc8d6dec79f1304734b04359e5c55
      size: 1443
    outs:
    - path: reports/evaluation.json
      hash: md5
      md5: 41321e0cf8126511ef34ea3997d78aeb
      size: 32
